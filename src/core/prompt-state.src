promptState = function
  promptState = {}

  promptState.prompt = function
    bang = "|> "
    pp = "" + bang

    while (true)
      input = user_input(pp)
      if input.trim then input = input.trim.split("  *") else input = []
      gsh.core.exec(input, true)
    end while
  end function

  return promptState
end function